@model IEnumerable<AsopaabiOnline.Modelo.Pedido>
@using AsopaabiOnline.Modelo

@{
    ViewBag.Title = "Pedidos";
}



<h3>@ViewBag.Title</h3>


    @if (Model.Any())
    {
<div class="card">
    <div style="margin:15px;">
        <div class="card-header">
            <a class="btn btn-success" asp-controller="Pedidos" asp-action="PedidosRecientes">Pedidos Recientes</a>
            <a class="btn btn-warning " asp-controller="Pedidos" asp-action="PedidosEnProceso">Pedidos En Proceso</a>
            <a class="btn btn-secondary" asp-controller="Pedidos" asp-action="PedidosFinalizados">Pedidos Finalizados</a>
        </div>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>
                        #
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Id)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.FechaPedido)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.FechaEntrega)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Notas)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Estado)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.IdDireccion)
                    </th>

                    <th>
                        @Html.DisplayNameFor(model => model.IdCliente)
                    </th>
                    <th>
                        <label>Opciones</label>
                    </th>

                    <th></th>
                </tr>
            </thead>
            <tbody>

                @{ int rowNumber = 0; }
                @foreach (var item in Model)
                {
                    var estadoPedidoClass = "";
                    if (item.Estado == EstadoDePedido.Reciente)
                    {
                        estadoPedidoClass = "badge badge-pill badge-success";
                    }
                    if (item.Estado == EstadoDePedido.Finalizado)
                    {
                        estadoPedidoClass = "badge badge-pill badge-secondary";
                    }
                    if (item.Estado == EstadoDePedido.EnProceso)
                    {
                        estadoPedidoClass = "badge badge-pill badge-warning";
                    }
                    <tr>
                        <td>
                            @(rowNumber += 1)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Id)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.FechaPedido)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.FechaEntrega)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Notas)
                        </td>
                        <td>
                            <span class="@estadoPedidoClass">
                                @Html.DisplayFor(modelItem => item.Estado)
                            </span>
                        </td>
                        <td>
                            <label>Provincia: @item.IdDireccionNavigation.IdProvinciaNavigation.Nombre  </label>
                            <br />
                            <label>Cantón: @item.IdDireccionNavigation.IdCantonNavigation.Nombre  </label>
                            <br />
                            <label>Distrito: @item.IdDireccionNavigation.IdDistritoNavigation.Nombre  </label>
                            <br />
                            <label>Detalles: @item.IdDireccionNavigation.Detalles  </label>

                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.IdClienteNavigation.FullName)
                        </td>

                        <td>


                            <a asp-action="Actualizar" asp-route-id="@item.Id">Actualizar</a> |
                            <a asp-action="CambiarEstadoDePedido" asp-route-id="@item.Id">Cambiar estado </a>


                        </td>
                    </tr>
                }

            </tbody>


        </table>

        </div>
    </div>
    }
    else
    {
    <br />
    <h3> No hay pedidos agregados</h3>

    }


